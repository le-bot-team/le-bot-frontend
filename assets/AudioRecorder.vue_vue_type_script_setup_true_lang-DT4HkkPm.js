import{f as y,aU as C,h as w,aV as x,a as M,D as _,r as l,B as N,l as u,g as m,b as p,t as v,u as h,j as B,M as S,o as c}from"./index-DgppYffZ.js";import{m as R}from"./module-D3pM6jUg.js";import{u as k}from"./use-quasar-S3hsX8ZC.js";import{i as Q}from"./common-K7rkEdDd.js";const z='<rect y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="60" width="15" height="140" rx="6"><animate attributeName="height" begin="0s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="90" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="120" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect>',D=y({name:"QSpinnerBars",props:C,setup(s){const{cSize:r,classes:n}=x(s);return()=>w("svg",{class:n.value,fill:"currentColor",width:r.value,height:r.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",innerHTML:z})}}),T={class:"column items-center q-gutter-y-sm"},U={key:0,class:"row"},V={class:"text-red"},A={key:1,class:"text-italic"},H=M({__name:"AudioRecorder",props:{disable:{type:Boolean,default:!1}},emits:["data","start","stop"],setup(s,{emit:r}){const n=r,{notify:g}=k(),o=Q("components.AudioRecorder"),a=l(),t=l(),e=l(),b=()=>{if(!(e.value?.length||!t.value))try{e.value=S(),a.value=new R(t.value,{mimeType:"audio/wav"}),a.value.ondataavailable=i=>{n("data",i.data)},a.value.onstart=()=>{n("start",e.value)},a.value.onstop=()=>{t.value&&n("stop")},a.value.start(200)}catch(i){g({type:"negative",message:o("labels.error"),caption:i.message}),e.value=""}},f=()=>{a.value?.state==="recording"&&a.value.stop(),e.value=""};return _(async()=>{t.value=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,sampleSize:16,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})}),N(()=>{t.value&&t.value.getTracks().forEach(i=>i.stop())}),(i,d)=>(c(),u("div",T,[e.value?.length?(c(),u("div",U,[p(D,{color:"red"}),m("div",V,v(h(o)("labels.recording")),1)])):(c(),u("div",A,v(h(o)("labels.hint")),1)),m("div",null,[p(B,{color:"primary",disable:s.disable,icon:e.value?.length?"stop":"play_arrow",outline:"",round:"",size:"xl",onClick:d[0]||(d[0]=E=>e.value?.length?f():b())},null,8,["disable","icon"])])]))}});export{H as _};
