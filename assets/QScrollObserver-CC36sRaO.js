import{b7 as v,f as h,a9 as T,P as m,ad as S,A as x,D as P,B as C,b4 as E,b8 as M,b9 as O}from"./index-DgppYffZ.js";const{passive:b}=v,w=["both","horizontal","vertical"],A=h({name:"QScrollObserver",props:{axis:{type:String,validator:e=>w.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:T},emits:["scroll"],setup(e,{emit:p}){const t={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let i=null,n,u;m(()=>e.scrollTarget,()=>{f(),d()});function l(){i?.();const a=Math.max(0,M(n)),c=O(n),o={top:a-t.position.top,left:c-t.position.left};if(e.axis==="vertical"&&o.top===0||e.axis==="horizontal"&&o.left===0)return;const g=Math.abs(o.top)>=Math.abs(o.left)?o.top<0?"up":"down":o.left<0?"left":"right";t.position={top:a,left:c},t.directionChanged=t.direction!==g,t.delta=o,t.directionChanged===!0&&(t.direction=g,t.inflectionPoint=t.position),p("scroll",{...t})}function d(){n=S(u,e.scrollTarget),n.addEventListener("scroll",r,b),r(!0)}function f(){n!==void 0&&(n.removeEventListener("scroll",r,b),n=void 0)}function r(a){if(a===!0||e.debounce===0||e.debounce==="0")l();else if(i===null){const[c,o]=e.debounce?[setTimeout(l,e.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];i=()=>{o(c),i=null}}}const{proxy:s}=x();return m(()=>s.$q.lang.rtl,l),P(()=>{u=s.$el.parentNode,d()}),C(()=>{i?.(),f()}),Object.assign(s,{trigger:r,getPosition:()=>t}),E}});export{A as Q};
