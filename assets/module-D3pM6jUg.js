const er=e=>t=>{const n=e(t);return t.add(n),n},tr=e=>(t,n)=>(e.set(t,n),n),It=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Jt=536870912,St=Jt*2,nr=(e,t)=>n=>{const r=t.get(n);let o=r===void 0?n.size:r<St?r+1:0;if(!n.has(o))return e(n,o);if(n.size<Jt){for(;n.has(o);)o=Math.floor(Math.random()*St);return e(n,o)}if(n.size>It)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(o);)o=Math.floor(Math.random()*It);return e(n,o)},en=new WeakMap,rr=tr(en),lt=nr(rr,en),Rt=er(lt),or=(e,t,n,r)=>o=>{const s=t(o);return a=>{const c=e(a);a.addEventListener("message",(({data:l})=>{const{id:p}=l;if(p!==null&&c.has(p)){const{reject:g,resolve:m}=c.get(p);c.delete(p),l.error===void 0?m(l.result):g(new Error(l.error.message))}})),r(a)&&a.start();const i=(l,p=null,g=[])=>new Promise((m,f)=>{const w=n(c);c.set(w,{reject:f,resolve:m}),p===null?a.postMessage({id:w,method:l},g):a.postMessage({id:w,method:l,params:p},g)}),u=(l,p,g=[])=>{a.postMessage({id:null,method:l,params:p},g)};let d={};for(const[l,p]of Object.entries(s))d={...d,[l]:p({call:i,notify:u})};return{...d}}},sr=e=>t=>{if(e.has(t))return e.get(t);const n=new Map;return e.set(t,n),n},ar=e=>t=>({...t,connect:({call:n})=>async()=>{const{port1:r,port2:o}=new MessageChannel,s=await n("connect",{port:r},[r]);return e.set(o,s),o},disconnect:({call:n})=>async r=>{const o=e.get(r);if(o===void 0)throw new Error("The given port is not connected.");await n("disconnect",{portId:o})},isSupported:({call:n})=>()=>n("isSupported")}),ir=e=>typeof e.start=="function",cr=or(sr(new WeakMap),ar(new WeakMap),lt,ir),Ze=new Set,Lt=new Set,ye=new WeakMap,ur=cr({deregister:({call:e})=>async t=>{const n=ye.get(t);if(n===void 0)throw new Error("There is no encoder registered with the given port.");const r=await e("deregister",{encoderId:n});return Ze.delete(n),ye.delete(t),r},encode:({call:e})=>async(t,n)=>{const r=await e("encode",{encoderInstanceId:t,timeslice:n});return Lt.delete(t),r},instantiate:({call:e})=>async(t,n)=>{const r=Rt(Lt),o=await e("instantiate",{encoderInstanceId:r,mimeType:t,sampleRate:n});return{encoderInstanceId:r,port:o}},register:({call:e})=>async t=>{if(ye.has(t))throw new Error("");const n=Rt(Ze);ye.set(t,n);try{return await e("register",{encoderId:n,port:t},[t])}catch(r){throw Ze.delete(n),ye.delete(t),r}}}),lr=e=>{const t=new Worker(e);return ur(t)},dr=`(()=>{var e={455(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),c=void 0===a?r.size:a<s?a+1:0;if(!r.has(c))return e(r,c);if(r.size<o){for(;r.has(c);)c=Math.floor(Math.random()*s);return e(r,c)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(c);)c=Math.floor(Math.random()*n);return e(r,c)}},c=new WeakMap,i=r(c),d=a(i,c),l=t(d);e.addUniqueNumber=l,e.generateUniqueNumber=d}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";var e=r(455);const t=((e,t,r,n)=>o=>{const s=t(o);return t=>{const o=e(t);t.addEventListener("message",({data:e})=>{const{id:t}=e;if(null!==t&&o.has(t)){const{reject:r,resolve:n}=o.get(t);o.delete(t),void 0===e.error?n(e.result):r(new Error(e.error.message))}}),n(t)&&t.start();const a=(e,n=null,s=[])=>new Promise((a,c)=>{const i=r(o);o.set(i,{reject:c,resolve:a}),null===n?t.postMessage({id:i,method:e},s):t.postMessage({id:i,method:e,params:n},s)}),c=(e,r,n=[])=>{t.postMessage({id:null,method:e,params:r},n)};let i={};for(const[e,t]of Object.entries(s))i={...i,[e]:t({call:a,notify:c})};return{...i}}})((o=new WeakMap,e=>{if(o.has(e))return o.get(e);const t=new Map;return o.set(e,t),t}),(n=new WeakMap,e=>({...e,connect:({call:e})=>async()=>{const{port1:t,port2:r}=new MessageChannel,o=await e("connect",{port:t},[t]);return n.set(r,o),r},disconnect:({call:e})=>async t=>{const r=n.get(t);if(void 0===r)throw new Error("The given port is not connected.");await e("disconnect",{portId:r})},isSupported:({call:e})=>()=>e("isSupported")})),e.generateUniqueNumber,e=>"function"==typeof e.start);var n,o;const s=t({characterize:({call:e})=>()=>e("characterize"),encode:({call:e})=>(t,r)=>e("encode",{recordingId:t,timeslice:r}),record:({call:e})=>async(t,r,n)=>{await e("record",{recordingId:t,sampleRate:r,typedArrays:n},n.map(({buffer:e})=>e).filter(e=>e instanceof ArrayBuffer))}}),a=-32603,c=-32602,i=-32601,d=(e,t)=>Object.assign(new Error(e),{status:t}),l=e=>d('The handler of the method called "'.concat(e,'" returned an unexpected result.'),a),u=(e,t)=>async({data:{id:r,method:n,params:o}})=>{const s=t[n];try{if(void 0===s)throw(e=>d('The requested method called "'.concat(e,'" is not supported.'),i))(n);const t=void 0===o?s():s(o);if(void 0===t)throw(e=>d('The handler of the method called "'.concat(e,'" returned no required result.'),a))(n);const c=t instanceof Promise?await t:t;if(null===r){if(void 0!==c.result)throw l(n)}else{if(void 0===c.result)throw l(n);const{result:t,transferables:o=[]}=c;e.postMessage({id:r,result:t},o)}}catch(t){const{message:n,status:o=-32603}=t;e.postMessage({error:{code:o,message:n},id:r})}},h=new Map,f=(t,r,n)=>({...r,connect:({port:n})=>{n.start();const o=t(n,r),s=(0,e.generateUniqueNumber)(h);return h.set(s,()=>{o(),n.close(),h.delete(s)}),{result:s}},disconnect:({portId:e})=>{const t=h.get(e);if(void 0===t)throw(e=>d('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),c))(e);return t(),{result:null}},isSupported:async()=>{if(await new Promise(e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])})){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),w=(e,t,r=()=>!0)=>{const n=f(w,t,r),o=u(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},p=e=>{e.onmessage=null,e.close()},m=new Map,g=new Map,v=((e,t)=>r=>{const n=t.get(r);if(void 0===n)throw new Error("There was no encoder stored with the given id.");e.delete(n),t.delete(r)})(m,g),y=new Map,M=(e=>t=>{const r=e.get(t);if(void 0===r)throw new Error("There was no instance of an encoder stored with the given id.");return r})(y),E=((e,t)=>r=>{const n=t(r);return e.delete(r),n})(y,M),b=((e,t)=>r=>{const[n,o,s,a]=t(r);return s?new Promise(t=>{o.onmessage=({data:s})=>{0===s.length?(e(o),t(n.encode(r,null))):n.record(r,a,s)}}):n.encode(r,null)})(p,E),T=(e=>t=>{for(const[r,n]of Array.from(e.values()))if(r.test(t))return n;throw new Error("There is no encoder registered which could handle the given mimeType.")})(m),I=((e,t,r)=>(n,o,s)=>{if(t.has(n))throw new Error('There is already an encoder instance registered with an id called "'.concat(n,'".'));const a=r(o),{port1:c,port2:i}=new MessageChannel,d=[a,c,!0,s];return t.set(n,d),c.onmessage=({data:t})=>{0===t.length?(e(c),d[2]=!1):a.record(n,s,t.map(e=>"number"==typeof e?new Float32Array(e):e))},i})(p,y,T),A=((e,t,r)=>async(n,o)=>{const s=r(o),a=await s.characterize(),c=a.toString();if(e.has(c))throw new Error("There is already an encoder stored which handles exactly the same mime types.");if(t.has(n))throw new Error('There is already an encoder registered with an id called "'.concat(n,'".'));return e.set(c,[a,s]),t.set(n,c),a})(m,g,s),N=(e=>(t,r)=>{const[n]=e(t);return n.encode(t,r)})(M);w(self,{deregister:async({encoderId:e})=>(v(e),{result:null}),encode:async({encoderInstanceId:e,timeslice:t})=>{const r=null===t?await b(e):await N(e,t);return{result:r,transferables:r}},instantiate:({encoderInstanceId:e,mimeType:t,sampleRate:r})=>{const n=I(e,t,r);return{result:n,transferables:[n]}},register:async({encoderId:e,port:t})=>({result:await A(e,t)})})})()})();`,fr=new Blob([dr],{type:"application/javascript; charset=utf-8"}),tn=URL.createObjectURL(fr),dt=lr(tn),Re=dt.encode,nn=dt.instantiate,hr=dt.register;URL.revokeObjectURL(tn);const pr=e=>(t,n)=>{if(e===null)throw new Error("A native BlobEvent could not be created.");return new e(t,n)},mr=(e,t)=>(n,r,o)=>{const s=[];let a=r,c=0;for(;c<n.byteLength;)if(a===null){const i=t(n,c);if(i===null)break;const{length:u,type:d}=i;a=d,c+=u}else{const i=e(n,c,a,o);if(i===null)break;const{content:u,length:d}=i;a=null,c+=d,u!==null&&s.push(u)}return{contents:s,currentElementType:a,offset:c}},gr=(e,t)=>class{constructor(r=null){this._listeners=new WeakMap,this._nativeEventTarget=r===null?e():r}addEventListener(r,o,s){if(o!==null){let a=this._listeners.get(o);a===void 0&&(a=t(this,o),typeof o=="function"&&this._listeners.set(o,a)),this._nativeEventTarget.addEventListener(r,a,s)}}dispatchEvent(r){return this._nativeEventTarget.dispatchEvent(r)}removeEventListener(r,o,s){const a=o===null?void 0:this._listeners.get(o);this._nativeEventTarget.removeEventListener(r,a===void 0?null:a,s)}},wr=e=>()=>{if(e===null)throw new Error("A native EventTarget could not be created.");return e.document.createElement("p")},_r=(e="")=>{try{return new DOMException(e,"InvalidModificationError")}catch(t){return t.code=13,t.message=e,t.name="InvalidModificationError",t}},vr=()=>{try{return new DOMException("","InvalidStateError")}catch(e){return e.code=11,e.name="InvalidStateError",e}},yr=(e,t,n,r,o,s,a)=>class extends s{constructor(i,u={}){const{mimeType:d}=u;if(a!==null&&(d===void 0||a.isTypeSupported!==void 0&&a.isTypeSupported(d))){const l=e(a,i,u);super(l),this._internalMediaRecorder=l}else if(d!==void 0&&o.some(l=>l.test(d)))super(),a!==null&&a.isTypeSupported!==void 0&&a.isTypeSupported("audio/webm; codecs=pcm")?this._internalMediaRecorder=r(this,a,i,d):this._internalMediaRecorder=n(this,i,d);else throw a!==null&&e(a,i,u),t();this._ondataavailable=null,this._onerror=null,this._onpause=null,this._onresume=null,this._onstart=null,this._onstop=null}get mimeType(){return this._internalMediaRecorder.mimeType}get ondataavailable(){return this._ondataavailable===null?this._ondataavailable:this._ondataavailable[0]}set ondataavailable(i){if(this._ondataavailable!==null&&this.removeEventListener("dataavailable",this._ondataavailable[1]),typeof i=="function"){const u=i.bind(this);this.addEventListener("dataavailable",u),this._ondataavailable=[i,u]}else this._ondataavailable=null}get onerror(){return this._onerror===null?this._onerror:this._onerror[0]}set onerror(i){if(this._onerror!==null&&this.removeEventListener("error",this._onerror[1]),typeof i=="function"){const u=i.bind(this);this.addEventListener("error",u),this._onerror=[i,u]}else this._onerror=null}get onpause(){return this._onpause===null?this._onpause:this._onpause[0]}set onpause(i){if(this._onpause!==null&&this.removeEventListener("pause",this._onpause[1]),typeof i=="function"){const u=i.bind(this);this.addEventListener("pause",u),this._onpause=[i,u]}else this._onpause=null}get onresume(){return this._onresume===null?this._onresume:this._onresume[0]}set onresume(i){if(this._onresume!==null&&this.removeEventListener("resume",this._onresume[1]),typeof i=="function"){const u=i.bind(this);this.addEventListener("resume",u),this._onresume=[i,u]}else this._onresume=null}get onstart(){return this._onstart===null?this._onstart:this._onstart[0]}set onstart(i){if(this._onstart!==null&&this.removeEventListener("start",this._onstart[1]),typeof i=="function"){const u=i.bind(this);this.addEventListener("start",u),this._onstart=[i,u]}else this._onstart=null}get onstop(){return this._onstop===null?this._onstop:this._onstop[0]}set onstop(i){if(this._onstop!==null&&this.removeEventListener("stop",this._onstop[1]),typeof i=="function"){const u=i.bind(this);this.addEventListener("stop",u),this._onstop=[i,u]}else this._onstop=null}get state(){return this._internalMediaRecorder.state}pause(){return this._internalMediaRecorder.pause()}resume(){return this._internalMediaRecorder.resume()}start(i){return this._internalMediaRecorder.start(i)}stop(){return this._internalMediaRecorder.stop()}static isTypeSupported(i){return a!==null&&a.isTypeSupported!==void 0&&a.isTypeSupported(i)||o.some(u=>u.test(i))}},Er=e=>e!==null&&e.BlobEvent!==void 0?e.BlobEvent:null,br=e=>e===null||e.MediaRecorder===void 0?null:e.MediaRecorder,Ar=e=>(t,n,r)=>{const o=new Map,s=new WeakMap,a=new WeakMap,c=[],i=new t(n,r),u=new WeakMap;return i.addEventListener("stop",({isTrusted:d})=>{d&&setTimeout(()=>c.shift())}),i.addEventListener=(d=>(l,p,g)=>{let m=p;if(typeof p=="function")if(l==="dataavailable"){const f=[];m=w=>{const[[h,A]=[!1,!1]]=c;h&&!A?f.push(w):p.call(i,w)},o.set(p,f),s.set(p,m)}else l==="error"?(m=f=>{f instanceof ErrorEvent?p.call(i,f):p.call(i,new ErrorEvent("error",{error:f.error}))},a.set(p,m)):l==="stop"&&(m=f=>{for(const[w,h]of o.entries())if(h.length>0){const[A]=h;h.length>1&&Object.defineProperty(A,"data",{value:new Blob(h.map(({data:v})=>v),{type:A.data.type})}),h.length=0,w.call(i,A)}p.call(i,f)},u.set(p,m));return d.call(i,l,m,g)})(i.addEventListener),i.removeEventListener=(d=>(l,p,g)=>{let m=p;if(typeof p=="function"){if(l==="dataavailable"){o.delete(p);const f=s.get(p);f!==void 0&&(m=f)}else if(l==="error"){const f=a.get(p);f!==void 0&&(m=f)}else if(l==="stop"){const f=u.get(p);f!==void 0&&(m=f)}}return d.call(i,l,m,g)})(i.removeEventListener),i.start=(d=>l=>{if(r.mimeType!==void 0&&r.mimeType.startsWith("audio/")&&n.getVideoTracks().length>0)throw e();return i.state==="inactive"&&c.push([l!==void 0,!0]),l===void 0?d.call(i):d.call(i,l)})(i.start),i.stop=(d=>()=>{i.state!=="inactive"&&(c[0][1]=!1),d.call(i)})(i.stop),i},Je=()=>{try{return new DOMException("","NotSupportedError")}catch(e){return e.code=9,e.name="NotSupportedError",e}},Cr=e=>(t,n,r,o=2)=>{const s=e(t,n);if(s===null)return s;const{length:a,value:c}=s;if(r==="master")return{content:null,length:a};if(n+a+c>t.byteLength)return null;if(r==="binary"){const i=(c/Float32Array.BYTES_PER_ELEMENT-1)/o,u=Array.from({length:o},()=>new Float32Array(i));for(let d=0;d<i;d+=1){const l=d*o+1;for(let p=0;p<o;p+=1)u[p][d]=t.getFloat32(n+a+(l+p)*Float32Array.BYTES_PER_ELEMENT,!0)}return{content:u,length:a+c}}return{content:null,length:a+c}},Tr=e=>(t,n)=>{const r=e(t,n);if(r===null)return r;const{length:o,value:s}=r;return s===35?{length:o,type:"binary"}:s===46||s===97||s===88713574||s===106212971||s===139690087||s===172351395||s===256095861?{length:o,type:"master"}:{length:o,type:"unknown"}},Mr=e=>(t,n)=>{const r=e(t,n);if(r===null)return r;const o=n+Math.floor((r-1)/8);if(o+r>t.byteLength)return null;let a=t.getUint8(o)&(1<<8-r%8)-1;for(let c=1;c<r;c+=1)a=(a<<8)+t.getUint8(o+c);return{length:r,value:a}},Pt=Symbol.observable||"@@observable";function Nr(e){return Symbol.observable||(typeof e=="function"&&e.prototype&&e.prototype[Symbol.observable]?(e.prototype[Pt]=e.prototype[Symbol.observable],delete e.prototype[Symbol.observable]):(e[Pt]=e[Symbol.observable],delete e[Symbol.observable])),e}const Oe=()=>{},Bt=e=>{throw e};function Or(e){return e?e.next&&e.error&&e.complete?e:{complete:(e.complete??Oe).bind(e),error:(e.error??Bt).bind(e),next:(e.next??Oe).bind(e)}:{complete:Oe,error:Bt,next:Oe}}const kr=e=>(t,n,r)=>e(o=>{const s=a=>o.next(a);return t.addEventListener(n,s,r),()=>t.removeEventListener(n,s,r)}),Ir=(e,t)=>{const n=()=>{},r=o=>typeof o[0]=="function";return o=>{const s=((...a)=>{const c=o(r(a)?t({next:a[0]}):t(...a));return c!==void 0?c:n});return s[Symbol.observable]=()=>({subscribe:(...a)=>({unsubscribe:s(...a)})}),e(s)}},Sr=Ir(Nr,Or),rn=kr(Sr),Rr=(e,t,n)=>async r=>{const o=new e([n],{type:"application/javascript; charset=utf-8"}),s=t.createObjectURL(o);try{await r(s)}finally{t.revokeObjectURL(s)}},Lr=e=>({data:t})=>{const{id:n}=t;if(n!==null){const r=e.get(n);if(r!==void 0){const{reject:o,resolve:s}=r;e.delete(n),t.error===void 0?s(t.result):o(new Error(t.error.message))}}},Pr=e=>(t,n)=>(r,o=[])=>new Promise((s,a)=>{const c=e(t);t.set(c,{reject:a,resolve:s}),n.postMessage({id:c,...r},o)}),Br=(e,t,n,r)=>(o,s,a={})=>{const c={channelCountMode:"explicit",numberOfInputs:1,numberOfOutputs:0},i=new o(s,"recorder-audio-worklet-processor",{...a,...c}),u=new Map,d=t(u,i.port),l=n(i.port,"message")(e(u));i.port.start();let p="inactive";return Object.defineProperties(i,{pause:{get(){return async()=>(r(["recording"],p),p="paused",d({method:"pause"}))}},port:{get(){throw new Error("The port of a RecorderAudioWorkletNode can't be accessed.")}},record:{get(){return async g=>(r(["inactive"],p),p="recording",d({method:"record",params:{encoderPort:g}},[g]))}},resume:{get(){return async()=>(r(["paused"],p),p="recording",d({method:"resume"}))}},stop:{get(){return async()=>{r(["paused","recording"],p),p="stopped";try{await d({method:"stop"})}finally{l()}}}}}),i},Ur=(e,t)=>{if(!e.includes(t))throw new Error(`Expected the state to be ${e.map(n=>`"${n}"`).join(" or ")} but it was "${t}".`)},Wr='(()=>{"use strict";class e extends AudioWorkletProcessor{constructor(){super(),this._encoderPort=null,this._numberOfChannels=0,this._state="inactive",this.port.onmessage=({data:e})=>{"pause"===e.method?"active"===this._state||"recording"===this._state?(this._state="paused",this._sendAcknowledgement(e.id)):this._sendUnexpectedStateError(e.id):"record"===e.method?"inactive"===this._state?(this._encoderPort=e.params.encoderPort,this._state="active",this._sendAcknowledgement(e.id)):this._sendUnexpectedStateError(e.id):"resume"===e.method?"paused"===this._state?(this._state="active",this._sendAcknowledgement(e.id)):this._sendUnexpectedStateError(e.id):"stop"===e.method?"active"!==this._state&&"paused"!==this._state&&"recording"!==this._state||null===this._encoderPort?this._sendUnexpectedStateError(e.id):(this._stop(this._encoderPort),this._sendAcknowledgement(e.id)):"number"==typeof e.id&&this.port.postMessage({error:{code:-32601,message:"The requested method is not supported."},id:e.id})}}process([e]){if("inactive"===this._state||"paused"===this._state)return!0;if("active"===this._state){if(void 0===e)throw new Error("No channelData was received for the first input.");if(0===e.length)return!0;this._state="recording"}if("recording"===this._state&&null!==this._encoderPort){if(void 0===e)throw new Error("No channelData was received for the first input.");return 0===e.length?this._encoderPort.postMessage(Array.from({length:this._numberOfChannels},()=>128)):(this._encoderPort.postMessage(e,e.map(({buffer:e})=>e)),this._numberOfChannels=e.length),!0}return!1}_sendAcknowledgement(e){this.port.postMessage({id:e,result:null})}_sendUnexpectedStateError(e){this.port.postMessage({error:{code:-32603,message:"The internal state does not allow to process the given message."},id:e})}_stop(e){e.postMessage([]),e.close(),this._encoderPort=null,this._state="stopped"}}e.parameterDescriptors=[],registerProcessor("recorder-audio-worklet-processor",e)})();',Dr=Rr(Blob,URL,Wr),Vr=Br(Lr,Pr(lt),rn,Ur),Ut=(e,t,n)=>({endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}),Wt=(e,t,n)=>({endTime:t,insertTime:n,type:"linearRampToValue",value:e}),et=(e,t)=>({startTime:t,type:"setValue",value:e}),on=(e,t,n)=>({duration:n,startTime:t,type:"setValueCurve",values:e}),sn=(e,t,{startTime:n,target:r,timeConstant:o})=>r+(t-r)*Math.exp((n-e)/o),me=e=>e.type==="exponentialRampToValue",Le=e=>e.type==="linearRampToValue",re=e=>me(e)||Le(e),ft=e=>e.type==="setValue",J=e=>e.type==="setValueCurve",Pe=(e,t,n,r)=>{const o=e[t];return o===void 0?r:re(o)||ft(o)?o.value:J(o)?o.values[o.values.length-1]:sn(n,Pe(e,t-1,o.startTime,r),o)},Dt=(e,t,n,r,o)=>n===void 0?[r.insertTime,o]:re(n)?[n.endTime,n.value]:ft(n)?[n.startTime,n.value]:J(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Pe(e,t-1,n.startTime,o)],tt=e=>e.type==="cancelAndHold",nt=e=>e.type==="cancelScheduledValues",ne=e=>tt(e)||nt(e)?e.cancelTime:me(e)||Le(e)?e.endTime:e.startTime,Vt=(e,t,n,{endTime:r,value:o})=>n===o?o:0<n&&0<o||n<0&&o<0?n*(o/n)**((e-t)/(r-t)):0,xt=(e,t,n,{endTime:r,value:o})=>n+(e-t)/(r-t)*(o-n),xr=(e,t)=>{const n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]},Fr=(e,{duration:t,startTime:n,values:r})=>{const o=(e-n)/t*(r.length-1);return xr(r,o)},ke=e=>e.type==="setTarget";class jr{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const n=ne(t);if(tt(t)||nt(t)){const r=this._automationEvents.findIndex(s=>nt(t)&&J(s)?s.startTime+s.duration>=n:ne(s)>=n),o=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),tt(t)){const s=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&re(o)){if(s!==void 0&&ke(s))throw new Error("The internal list is malformed.");const a=s===void 0?o.insertTime:J(s)?s.startTime+s.duration:ne(s),c=s===void 0?this._defaultValue:J(s)?s.values[s.values.length-1]:s.value,i=me(o)?Vt(n,a,c,o):xt(n,a,c,o),u=me(o)?Ut(i,n,this._currenTime):Wt(i,n,this._currenTime);this._automationEvents.push(u)}if(s!==void 0&&ke(s)&&this._automationEvents.push(et(this.getValue(n),n)),s!==void 0&&J(s)&&s.startTime+s.duration>n){const a=n-s.startTime,c=(s.values.length-1)/s.duration,i=Math.max(2,1+Math.ceil(a*c)),u=a/(i-1)*c,d=s.values.slice(0,i);if(u<1)for(let l=1;l<i;l+=1){const p=u*l%1;d[l]=s.values[l-1]*(1-p)+s.values[l]*p}this._automationEvents[this._automationEvents.length-1]=on(d,s.startTime,a)}}}else{const r=this._automationEvents.findIndex(a=>ne(a)>n),o=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(o!==void 0&&J(o)&&ne(o)+o.duration>n)return!1;const s=me(t)?Ut(t.value,t.endTime,this._currenTime):Le(t)?Wt(t.value,n,this._currenTime):t;if(r===-1)this._automationEvents.push(s);else{if(J(t)&&n+t.duration>ne(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,s)}}return!0}flush(t){const n=this._automationEvents.findIndex(r=>ne(r)>t);if(n>1){const r=this._automationEvents.slice(n-1),o=r[0];ke(o)&&r.unshift(et(Pe(this._automationEvents,n-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=r}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(a=>ne(a)>t),r=this._automationEvents[n],o=(n===-1?this._automationEvents.length:n)-1,s=this._automationEvents[o];if(s!==void 0&&ke(s)&&(r===void 0||!re(r)||r.insertTime>t))return sn(t,Pe(this._automationEvents,o-1,s.startTime,this._defaultValue),s);if(s!==void 0&&ft(s)&&(r===void 0||!re(r)))return s.value;if(s!==void 0&&J(s)&&(r===void 0||!re(r)||s.startTime+s.duration>t))return t<s.startTime+s.duration?Fr(t,s):s.values[s.values.length-1];if(s!==void 0&&re(s)&&(r===void 0||!re(r)))return s.value;if(r!==void 0&&me(r)){const[a,c]=Dt(this._automationEvents,o,s,r,this._defaultValue);return Vt(t,a,c,r)}if(r!==void 0&&Le(r)){const[a,c]=Dt(this._automationEvents,o,s,r,this._defaultValue);return xt(t,a,c,r)}return this._defaultValue}}const Gr=e=>({cancelTime:e,type:"cancelAndHold"}),qr=e=>({cancelTime:e,type:"cancelScheduledValues"}),$r=(e,t)=>({endTime:t,type:"exponentialRampToValue",value:e}),zr=(e,t)=>({endTime:t,type:"linearRampToValue",value:e}),Xr=(e,t,n)=>({startTime:t,target:e,timeConstant:n,type:"setTarget"}),Yr=()=>new DOMException("","AbortError"),Hr=e=>(t,n,[r,o,s],a)=>{e(t[o],[n,r,s],c=>c[0]===n&&c[1]===r,a)},Zr=e=>(t,n,r)=>{const o=[];for(let s=0;s<r.numberOfInputs;s+=1)o.push(new Set);e.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},Kr=e=>(t,n)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ge=new WeakSet,an=new WeakMap,cn=new WeakMap,un=new WeakMap,ln=new WeakMap,dn=new WeakMap,fn=new WeakMap,rt=new WeakMap,ot=new WeakMap,st=new WeakMap,hn={construct(){return hn}},Qr=e=>{try{const t=new Proxy(e,hn);new t}catch{return!1}return!0},Ft=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,jt=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),o=r.match(Ft);for(;o!==null;){const s=o[1].slice(1,-1),a=o[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,t).toString());n.push(a),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(Ft)}return[n.join(";"),r]},Gt=e=>{if(e!==void 0&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},qt=e=>{if(!Qr(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(e.prototype===null||typeof e.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Jr=(e,t,n,r,o,s,a,c,i,u,d,l,p)=>{let g=0;return(m,f,w={credentials:"omit"})=>{const h=d.get(m);if(h!==void 0&&h.has(f))return Promise.resolve();const A=u.get(m);if(A!==void 0){const E=A.get(f);if(E!==void 0)return E}const v=s(m),T=v.audioWorklet===void 0?o(f).then(([E,b])=>{const[_,y]=jt(E,b),M=`${_};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${y}
})})(window,'_AWGS')`;return n(M)}).then(()=>{const E=p._AWGS.pop();if(E===void 0)throw new SyntaxError;r(v.currentTime,v.sampleRate,()=>E(class{},void 0,(b,_)=>{if(b.trim()==="")throw t();const y=ot.get(v);if(y!==void 0){if(y.has(b))throw t();qt(_),Gt(_.parameterDescriptors),y.set(b,_)}else qt(_),Gt(_.parameterDescriptors),ot.set(v,new Map([[b,_]]))},v.sampleRate,void 0,void 0))}):Promise.all([o(f),Promise.resolve(e(l,l))]).then(([[E,b],_])=>{const y=g+1;g=y;const[M,L]=jt(E,b),P=`${M};((AudioWorkletProcessor,registerProcessor)=>{${L}
})(${_?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${_?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${_?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${y}',class extends AudioWorkletProcessor{process(){return !1}})`,W=new Blob([P],{type:"application/javascript; charset=utf-8"}),k=URL.createObjectURL(W);return v.audioWorklet.addModule(k,w).then(()=>{if(c(v))return v;const U=a(v);return U.audioWorklet.addModule(k,w).then(()=>U)}).then(U=>{if(i===null)throw new SyntaxError;try{new i(U,`__sac${y}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(k))});return A===void 0?u.set(m,new Map([[f,T]])):A.set(f,T),T.then(()=>{const E=d.get(m);E===void 0?d.set(m,new Set([f])):E.add(f)}).finally(()=>{const E=u.get(m);E!==void 0&&E.delete(f)}),T}},K=(e,t)=>{const n=e.get(t);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},xe=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return e.delete(r),r},pn=(e,t,n,r)=>{const o=K(e,t),s=xe(o,a=>a[0]===n&&a[1]===r);return o.size===0&&e.delete(t),s},Ae=e=>K(fn,e),Be=e=>{if(ge.has(e))throw new Error("The AudioNode is already stored.");ge.add(e),Ae(e).forEach(t=>t(!0))},mn=e=>"port"in e,ht=e=>{if(!ge.has(e))throw new Error("The AudioNode is not stored.");ge.delete(e),Ae(e).forEach(t=>t(!1))},at=(e,t)=>{!mn(e)&&t.every(n=>n.size===0)&&ht(e)},eo=(e,t,n,r,o,s,a,c,i,u,d,l,p)=>{const g=new WeakMap;return(m,f,w,h,A)=>{const{activeInputs:v,passiveInputs:T}=s(f),{outputs:E}=s(m),b=c(m),_=y=>{const M=i(f),L=i(m);if(y){const N=pn(T,m,w,h);e(v,m,N,!1),!A&&!l(m)&&n(L,M,w,h),p(f)&&Be(f)}else{const N=r(v,m,w,h);t(T,h,N,!1),!A&&!l(m)&&o(L,M,w,h);const S=a(f);if(S===0)d(f)&&at(f,v);else{const B=g.get(f);B!==void 0&&clearTimeout(B),g.set(f,setTimeout(()=>{d(f)&&at(f,v)},S*1e3))}}};return u(E,[f,w,h],y=>y[0]===f&&y[1]===w&&y[2]===h,!0)?(b.add(_),d(m)?e(v,m,[w,h,_],!0):t(T,h,[m,w,_],!0),!0):!1}},to=e=>(t,n,[r,o,s],a)=>{const c=t.get(r);c===void 0?t.set(r,new Set([[o,n,s]])):e(c,[o,n,s],i=>i[0]===o&&i[1]===n,a)},no=e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)},ro=e=>(t,n)=>{e(t).add(n)},gn=(e,t)=>e.context===t,$t=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ue=()=>new DOMException("","IndexSizeError"),oo=e=>{e.getChannelData=(t=>n=>{try{return t.call(e,n)}catch(r){throw r.code===12?ue():r}})(e.getChannelData)},so={numberOfChannels:1},ao=(e,t,n,r,o,s,a,c)=>{let i=null;return class wn{constructor(d){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:p,sampleRate:g}={...so,...d};i===null&&(i=new o(1,1,44100));const m=r!==null&&t(s,s)?new r({length:l,numberOfChannels:p,sampleRate:g}):i.createBuffer(p,l,g);if(m.numberOfChannels===0)throw n();return typeof m.copyFromChannel!="function"?(a(m),oo(m)):t($t,()=>$t(m))||c(m),e.add(m),m}static[Symbol.hasInstance](d){return d!==null&&typeof d=="object"&&Object.getPrototypeOf(d)===wn.prototype||e.has(d)}}},Fe=-34028234663852886e22,pt=-Fe,ae=e=>ge.has(e),io={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},co=(e,t,n,r,o,s,a,c)=>class extends e{constructor(u,d){const l=s(u),p={...io,...d},g=o(l,p),m=a(l),f=m?t():null;super(u,!1,g,f),this._audioBufferSourceNodeRenderer=f,this._isBufferNullified=!1,this._isBufferSet=p.buffer!==null,this._nativeAudioBufferSourceNode=g,this._onended=null,this._playbackRate=n(this,m,g.playbackRate,pt,Fe)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const d=typeof u=="function"?c(this,u):null;this._nativeAudioBufferSourceNode.onended=d;const l=this._nativeAudioBufferSourceNode.onended;this._onended=l!==null&&l===d?u:l}get playbackRate(){return this._playbackRate}start(u=0,d=0,l){if(this._nativeAudioBufferSourceNode.start(u,d,l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=l===void 0?[u,d]:[u,d,l]),this.context.state!=="closed"){Be(this);const p=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",p),ae(this)&&ht(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",p)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},uo=(e,t,n,r,o)=>()=>{const s=new WeakMap;let a=null,c=null;const i=async(u,d)=>{let l=n(u);const p=gn(l,d);if(!p){const g={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,loop:l.loop,loopEnd:l.loopEnd,loopStart:l.loopStart,playbackRate:l.playbackRate.value};l=t(d,g),a!==null&&l.start(...a),c!==null&&l.stop(c)}return s.set(d,l),p?await e(d,u.playbackRate,l.playbackRate):await r(d,u.playbackRate,l.playbackRate),await o(u,d,l),l};return{set start(u){a=u},set stop(u){c=u},render(u,d){const l=s.get(d);return l!==void 0?Promise.resolve(l):i(u,d)}}},lo=e=>"playbackRate"in e,fo=e=>"frequency"in e&&"gain"in e,ho=e=>"offset"in e,po=e=>!("frequency"in e)&&"gain"in e,mo=e=>"detune"in e&&"frequency"in e&&!("gain"in e),go=e=>"pan"in e,z=e=>K(an,e),Ce=e=>K(un,e),it=(e,t)=>{const{activeInputs:n}=z(e);n.forEach(o=>o.forEach(([s])=>{t.includes(e)||it(s,[...t,e])}));const r=lo(e)?[e.playbackRate]:mn(e)?Array.from(e.parameters.values()):fo(e)?[e.Q,e.detune,e.frequency,e.gain]:ho(e)?[e.offset]:po(e)?[e.gain]:mo(e)?[e.detune,e.frequency]:go(e)?[e.pan]:[];for(const o of r){const s=Ce(o);s!==void 0&&s.activeInputs.forEach(([a])=>it(a,t))}ae(e)&&ht(e)},wo=e=>{it(e.destination,[])},_o=e=>e===void 0||typeof e=="number"||typeof e=="string"&&(e==="balanced"||e==="interactive"||e==="playback"),vo=(e,t,n,r,o,s,a,c)=>class extends e{constructor(u,d){const l=s(u),p=a(l),g=o(l,d,p),m=p?t(c):null;super(u,!1,g,m),this._isNodeOfNativeOfflineAudioContext=p,this._nativeAudioDestinationNode=g}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},yo=e=>{const t=new WeakMap,n=async(r,o)=>{const s=o.destination;return t.set(o,s),await e(r,o,s),s};return{render(r,o){const s=t.get(o);return s!==void 0?Promise.resolve(s):n(r,o)}}},Eo=(e,t,n,r,o,s,a,c)=>(i,u)=>{const d=u.listener,l=()=>{const E=new Float32Array(1),b=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),_=a(u);let y=!1,M=[0,0,-1,0,1,0],L=[0,0,0];const N=()=>{if(y)return;y=!0;const W=r(u,256,9,0);W.onaudioprocess=({inputBuffer:k})=>{const U=[s(k,E,0),s(k,E,1),s(k,E,2),s(k,E,3),s(k,E,4),s(k,E,5)];U.some((O,R)=>O!==M[R])&&(d.setOrientation(...U),M=U);const x=[s(k,E,6),s(k,E,7),s(k,E,8)];x.some((O,R)=>O!==L[R])&&(d.setPosition(...x),L=x)},b.connect(W)},S=W=>k=>{k!==M[W]&&(M[W]=k,d.setOrientation(...M))},B=W=>k=>{k!==L[W]&&(L[W]=k,d.setPosition(...L))},P=(W,k,U)=>{const x=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k});x.connect(b,0,W),x.start(),Object.defineProperty(x.offset,"defaultValue",{get(){return k}});const O=e({context:i},_,x.offset,pt,Fe);return c(O,"value",R=>()=>R.call(O),R=>V=>{try{R.call(O,V)}catch(q){if(q.code!==9)throw q}N(),_&&U(V)}),O.cancelAndHoldAtTime=(R=>_?()=>{throw o()}:(...V)=>{const q=R.apply(O,V);return N(),q})(O.cancelAndHoldAtTime),O.cancelScheduledValues=(R=>_?()=>{throw o()}:(...V)=>{const q=R.apply(O,V);return N(),q})(O.cancelScheduledValues),O.exponentialRampToValueAtTime=(R=>_?()=>{throw o()}:(...V)=>{const q=R.apply(O,V);return N(),q})(O.exponentialRampToValueAtTime),O.linearRampToValueAtTime=(R=>_?()=>{throw o()}:(...V)=>{const q=R.apply(O,V);return N(),q})(O.linearRampToValueAtTime),O.setTargetAtTime=(R=>_?()=>{throw o()}:(...V)=>{const q=R.apply(O,V);return N(),q})(O.setTargetAtTime),O.setValueAtTime=(R=>_?()=>{throw o()}:(...V)=>{const q=R.apply(O,V);return N(),q})(O.setValueAtTime),O.setValueCurveAtTime=(R=>_?()=>{throw o()}:(...V)=>{const q=R.apply(O,V);return N(),q})(O.setValueCurveAtTime),O};return{forwardX:P(0,0,S(0)),forwardY:P(1,0,S(1)),forwardZ:P(2,-1,S(2)),positionX:P(6,0,B(0)),positionY:P(7,0,B(1)),positionZ:P(8,0,B(2)),upX:P(3,0,S(3)),upY:P(4,1,S(4)),upZ:P(5,0,S(5))}},{forwardX:p,forwardY:g,forwardZ:m,positionX:f,positionY:w,positionZ:h,upX:A,upY:v,upZ:T}=d.forwardX===void 0?l():d;return{get forwardX(){return p},get forwardY(){return g},get forwardZ(){return m},get positionX(){return f},get positionY(){return w},get positionZ(){return h},get upX(){return A},get upY(){return v},get upZ(){return T}}},Ue=e=>"context"in e,Te=e=>Ue(e[0]),le=(e,t,n,r)=>{for(const o of e)if(n(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},zt=(e,t,[n,r],o)=>{le(e,[t,n,r],s=>s[0]===t&&s[1]===n,o)},Xt=(e,[t,n,r],o)=>{const s=e.get(t);s===void 0?e.set(t,new Set([[n,r]])):le(s,[n,r],a=>a[0]===n,o)},_n=e=>"inputs"in e,ct=(e,t,n,r)=>{if(_n(t)){const o=t.inputs[r];return e.connect(o,n,0),[o,n,0]}return e.connect(t,n,r),[t,n,r]},vn=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},bo=(e,t,n)=>xe(e,r=>r[0]===t&&r[1]===n),yn=(e,t)=>{if(!Ae(e).delete(t))throw new Error("Missing the expected event listener.")},En=(e,t,n)=>{const r=K(e,t),o=xe(r,s=>s[0]===n);return r.size===0&&e.delete(t),o},ut=(e,t,n,r)=>{_n(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},H=e=>K(cn,e),Ee=e=>K(ln,e),ie=e=>rt.has(e),Se=e=>!ge.has(e),Yt=(e,t)=>new Promise(n=>{if(t!==null)n(!0);else{const r=e.createScriptProcessor(256,1,1),o=e.createGain(),s=e.createBuffer(1,2,44100),a=s.getChannelData(0);a[0]=1,a[1]=1;const c=e.createBufferSource();c.buffer=s,c.loop=!0,c.connect(r).connect(e.destination),c.connect(o),c.disconnect(o),r.onaudioprocess=i=>{const u=i.inputBuffer.getChannelData(0);Array.prototype.some.call(u,d=>d===1)?n(!0):n(!1),c.stop(),r.onaudioprocess=null,c.disconnect(r),r.disconnect(e.destination)},c.start()}}),Ke=(e,t)=>{const n=new Map;for(const r of e)for(const o of r){const s=n.get(o);n.set(o,s===void 0?1:s+1)}n.forEach((r,o)=>t(o,r))},We=e=>"context"in e,Ao=e=>{const t=new Map;e.connect=(n=>(r,o=0,s=0)=>{const a=We(r)?n(r,o,s):n(r,o),c=t.get(r);return c===void 0?t.set(r,[{input:s,output:o}]):c.every(i=>i.input!==s||i.output!==o)&&c.push({input:s,output:o}),a})(e.connect.bind(e)),e.disconnect=(n=>(r,o,s)=>{if(n.apply(e),r===void 0)t.clear();else if(typeof r=="number")for(const[a,c]of t){const i=c.filter(u=>u.output!==r);i.length===0?t.delete(a):t.set(a,i)}else if(t.has(r))if(o===void 0)t.delete(r);else{const a=t.get(r);if(a!==void 0){const c=a.filter(i=>i.output!==o&&(i.input!==s||s===void 0));c.length===0?t.delete(r):t.set(r,c)}}for(const[a,c]of t)c.forEach(i=>{We(a)?e.connect(a,i.output,i.input):e.connect(a,i.output)})})(e.disconnect)},Co=(e,t,n,r)=>{const{activeInputs:o,passiveInputs:s}=Ce(t),{outputs:a}=z(e),c=Ae(e),i=u=>{const d=H(e),l=Ee(t);if(u){const p=En(s,e,n);zt(o,e,p,!1),!r&&!ie(e)&&d.connect(l,n)}else{const p=bo(o,e,n);Xt(s,p,!1),!r&&!ie(e)&&d.disconnect(l,n)}};return le(a,[t,n],u=>u[0]===t&&u[1]===n,!0)?(c.add(i),ae(e)?zt(o,e,[n,i],!0):Xt(s,[e,n,i],!0),!0):!1},To=(e,t,n,r)=>{const{activeInputs:o,passiveInputs:s}=z(t),a=vn(o[r],e,n);return a===null?[pn(s,e,n,r)[2],!1]:[a[2],!0]},Mo=(e,t,n)=>{const{activeInputs:r,passiveInputs:o}=Ce(t),s=vn(r,e,n);return s===null?[En(o,e,n)[1],!1]:[s[2],!0]},mt=(e,t,n,r,o)=>{const[s,a]=To(e,n,r,o);if(s!==null&&(yn(e,s),a&&!t&&!ie(e)&&ut(H(e),H(n),r,o)),ae(n)){const{activeInputs:c}=z(n);at(n,c)}},gt=(e,t,n,r)=>{const[o,s]=Mo(e,n,r);o!==null&&(yn(e,o),s&&!t&&!ie(e)&&H(e).disconnect(Ee(n),r))},No=(e,t)=>{const n=z(e),r=[];for(const o of n.outputs)Te(o)?mt(e,t,...o):gt(e,t,...o),r.push(o[0]);return n.outputs.clear(),r},Oo=(e,t,n)=>{const r=z(e),o=[];for(const s of r.outputs)s[1]===n&&(Te(s)?mt(e,t,...s):gt(e,t,...s),o.push(s[0]),r.outputs.delete(s));return o},ko=(e,t,n,r,o)=>{const s=z(e);return Array.from(s.outputs).filter(a=>a[0]===n&&(r===void 0||a[1]===r)&&(o===void 0||a[2]===o)).map(a=>(Te(a)?mt(e,t,...a):gt(e,t,...a),s.outputs.delete(a),a[0]))},Io=(e,t,n,r,o,s,a,c,i,u,d,l,p,g,m,f)=>class extends u{constructor(h,A,v,T){super(v),this._context=h,this._nativeAudioNode=v;const E=d(h);l(E)&&n(Yt,()=>Yt(E,f))!==!0&&Ao(v),cn.set(this,v),fn.set(this,new Set),h.state!=="closed"&&A&&Be(this),e(this,T,v)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(h){this._nativeAudioNode.channelCount=h}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(h){this._nativeAudioNode.channelCountMode=h}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(h){this._nativeAudioNode.channelInterpretation=h}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(h,A=0,v=0){if(A<0||A>=this._nativeAudioNode.numberOfOutputs)throw o();const T=d(this._context),E=m(T);if(p(h)||g(h))throw s();if(Ue(h)){const y=H(h);try{const L=ct(this._nativeAudioNode,y,A,v),N=Se(this);(E||N)&&this._nativeAudioNode.disconnect(...L),this.context.state!=="closed"&&!N&&Se(h)&&Be(h)}catch(L){throw L.code===12?s():L}if(t(this,h,A,v,E)){const L=i([this],h);Ke(L,r(E))}return h}const b=Ee(h);if(b.name==="playbackRate"&&b.maxValue===1024)throw a();try{this._nativeAudioNode.connect(b,A),(E||Se(this))&&this._nativeAudioNode.disconnect(b,A)}catch(y){throw y.code===12?s():y}if(Co(this,h,A,E)){const y=i([this],h);Ke(y,r(E))}}disconnect(h,A,v){let T;const E=d(this._context),b=m(E);if(h===void 0)T=No(this,b);else if(typeof h=="number"){if(h<0||h>=this.numberOfOutputs)throw o();T=Oo(this,b,h)}else{if(A!==void 0&&(A<0||A>=this.numberOfOutputs)||Ue(h)&&v!==void 0&&(v<0||v>=h.numberOfInputs))throw o();if(T=ko(this,b,h,A,v),T.length===0)throw s()}for(const _ of T){const y=i([this],_);Ke(y,c)}}},So=(e,t,n,r,o,s,a,c,i,u,d,l,p)=>(g,m,f,w=null,h=null)=>{const A=f.value,v=new jr(A),T=m?r(v):null,E={get defaultValue(){return A},get maxValue(){return w===null?f.maxValue:w},get minValue(){return h===null?f.minValue:h},get value(){return f.value},set value(b){f.value=b,E.setValueAtTime(b,g.context.currentTime)},cancelAndHoldAtTime(b){if(typeof f.cancelAndHoldAtTime=="function")T===null&&v.flush(g.context.currentTime),v.add(o(b)),f.cancelAndHoldAtTime(b);else{const _=Array.from(v).pop();T===null&&v.flush(g.context.currentTime),v.add(o(b));const y=Array.from(v).pop();f.cancelScheduledValues(b),_!==y&&y!==void 0&&(y.type==="exponentialRampToValue"?f.exponentialRampToValueAtTime(y.value,y.endTime):y.type==="linearRampToValue"?f.linearRampToValueAtTime(y.value,y.endTime):y.type==="setValue"?f.setValueAtTime(y.value,y.startTime):y.type==="setValueCurve"&&f.setValueCurveAtTime(y.values,y.startTime,y.duration))}return E},cancelScheduledValues(b){return T===null&&v.flush(g.context.currentTime),v.add(s(b)),f.cancelScheduledValues(b),E},exponentialRampToValueAtTime(b,_){if(b===0)throw new RangeError;if(!Number.isFinite(_)||_<0)throw new RangeError;const y=g.context.currentTime;return T===null&&v.flush(y),Array.from(v).length===0&&(v.add(u(A,y)),f.setValueAtTime(A,y)),v.add(a(b,_)),f.exponentialRampToValueAtTime(b,_),E},linearRampToValueAtTime(b,_){const y=g.context.currentTime;return T===null&&v.flush(y),Array.from(v).length===0&&(v.add(u(A,y)),f.setValueAtTime(A,y)),v.add(c(b,_)),f.linearRampToValueAtTime(b,_),E},setTargetAtTime(b,_,y){return T===null&&v.flush(g.context.currentTime),v.add(i(b,_,y)),f.setTargetAtTime(b,_,y),E},setValueAtTime(b,_){return T===null&&v.flush(g.context.currentTime),v.add(u(b,_)),f.setValueAtTime(b,_),E},setValueCurveAtTime(b,_,y){const M=b instanceof Float32Array?b:new Float32Array(b);if(l!==null&&l.name==="webkitAudioContext"){const L=_+y,N=g.context.sampleRate,S=Math.ceil(_*N),B=Math.floor(L*N),P=B-S,W=new Float32Array(P);for(let U=0;U<P;U+=1){const x=(M.length-1)/y*((S+U)/N-_),O=Math.floor(x),R=Math.ceil(x);W[U]=O===R?M[O]:(1-(x-O))*M[O]+(1-(R-x))*M[R]}T===null&&v.flush(g.context.currentTime),v.add(d(W,_,y)),f.setValueCurveAtTime(W,_,y);const k=B/N;k<L&&p(E,W[W.length-1],k),p(E,M[M.length-1],L)}else T===null&&v.flush(g.context.currentTime),v.add(d(M,_,y)),f.setValueCurveAtTime(M,_,y);return E}};return n.set(E,f),t.set(E,g),e(E,T),E},Ro=e=>({replay(t){for(const n of e)if(n.type==="exponentialRampToValue"){const{endTime:r,value:o}=n;t.exponentialRampToValueAtTime(o,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:o}=n;t.linearRampToValueAtTime(o,r)}else if(n.type==="setTarget"){const{startTime:r,target:o,timeConstant:s}=n;t.setTargetAtTime(o,r,s)}else if(n.type==="setValue"){const{startTime:r,value:o}=n;t.setValueAtTime(o,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:o,values:s}=n;t.setValueCurveAtTime(s,o,r)}else throw new Error("Can't apply an unknown automation.")}});class bn{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,n=null){return this._map.forEach((r,o)=>t.call(n,r,o,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const Lo={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Po=(e,t,n,r,o,s,a,c,i,u,d,l,p,g)=>class extends t{constructor(f,w,h){var A;const v=c(f),T=i(v),E=d({...Lo,...h});p(E);const b=ot.get(v),_=b?.get(w),y=T||v.state!=="closed"?v:(A=a(v))!==null&&A!==void 0?A:v,M=o(y,T?null:f.baseLatency,u,w,_,E),L=T?r(w,E,_):null;super(f,!0,M,L);const N=[];M.parameters.forEach((B,P)=>{const W=n(this,T,B);N.push([P,W])}),this._nativeAudioWorkletNode=M,this._onprocessorerror=null,this._parameters=new bn(N),T&&e(v,this);const{activeInputs:S}=s(this);l(M,S)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(f){const w=typeof f=="function"?g(this,f):null;this._nativeAudioWorkletNode.onprocessorerror=w;const h=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=h!==null&&h===w?f:h}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function De(e,t,n,r,o){if(typeof e.copyFromChannel=="function")t[n].byteLength===0&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,o);else{const s=e.getChannelData(r);if(t[n].byteLength===0)t[n]=s.slice(o,o+128);else{const a=new Float32Array(s.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(a)}}}const An=(e,t,n,r,o)=>{typeof e.copyToChannel=="function"?t[n].byteLength!==0&&e.copyToChannel(t[n],r,o):t[n].byteLength!==0&&e.getChannelData(r).set(t[n],o)},Ve=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const o=[],s=typeof t=="number"?t:t[r];for(let a=0;a<s;a+=1)o.push(new Float32Array(128));n.push(o)}return n},Bo=(e,t)=>{const n=K(st,e),r=H(t);return K(n,r)},Uo=async(e,t,n,r,o,s,a)=>{const c=t===null?Math.ceil(e.context.length/128)*128:t.length,i=r.channelCount*r.numberOfInputs,u=o.reduce((w,h)=>w+h,0),d=u===0?null:n.createBuffer(u,c,n.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");const l=z(e),p=await Bo(n,e),g=Ve(r.numberOfInputs,r.channelCount),m=Ve(r.numberOfOutputs,o),f=Array.from(e.parameters.keys()).reduce((w,h)=>({...w,[h]:new Float32Array(128)}),{});for(let w=0;w<c;w+=128){if(r.numberOfInputs>0&&t!==null)for(let h=0;h<r.numberOfInputs;h+=1)for(let A=0;A<r.channelCount;A+=1)De(t,g[h],A,A,w);s.parameterDescriptors!==void 0&&t!==null&&s.parameterDescriptors.forEach(({name:h},A)=>{De(t,f,h,i+A,w)});for(let h=0;h<r.numberOfInputs;h+=1)for(let A=0;A<o[h];A+=1)m[h][A].byteLength===0&&(m[h][A]=new Float32Array(128));try{const h=g.map((v,T)=>l.activeInputs[T].size===0?[]:v),A=a(w/n.sampleRate,n.sampleRate,()=>p.process(h,m,f));if(d!==null)for(let v=0,T=0;v<r.numberOfOutputs;v+=1){for(let E=0;E<o[v];E+=1)An(d,m[v],E,T+E,w);T+=o[v]}if(!A)break}catch(h){e.dispatchEvent(new ErrorEvent("processorerror",{colno:h.colno,filename:h.filename,lineno:h.lineno,message:h.message}));break}}return d},Wo=(e,t,n,r,o,s,a,c,i,u,d,l,p,g,m,f)=>(w,h,A)=>{const v=new WeakMap;let T=null;const E=async(b,_)=>{let y=d(b),M=null;const L=gn(y,_),N=Array.isArray(h.outputChannelCount)?h.outputChannelCount:Array.from(h.outputChannelCount);if(l===null){const S=N.reduce((k,U)=>k+U,0),B=o(_,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),P=[];for(let k=0;k<b.numberOfOutputs;k+=1)P.push(r(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[k]}));const W=a(_,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:1});W.connect=t.bind(null,P),W.disconnect=i.bind(null,P),M=[B,P,W]}else L||(y=new l(_,w));if(v.set(_,M===null?y:M[2]),M!==null){if(T===null){if(A===void 0)throw new Error("Missing the processor constructor.");if(p===null)throw new Error("Missing the native OfflineAudioContext constructor.");const U=b.channelCount*b.numberOfInputs,x=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length,O=U+x;T=Uo(b,O===0?null:await(async()=>{const V=new p(O,Math.ceil(b.context.length/128)*128,_.sampleRate),q=[],fe=[];for(let j=0;j<h.numberOfInputs;j+=1)q.push(a(V,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:1})),fe.push(o(V,{channelCount:h.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:h.channelCount}));const he=await Promise.all(Array.from(b.parameters.values()).map(async j=>{const X=s(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:j.value});return await g(V,j,X.offset),X})),pe=r(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+x)});for(let j=0;j<h.numberOfInputs;j+=1){q[j].connect(fe[j]);for(let X=0;X<h.channelCount;X+=1)fe[j].connect(pe,X,j*h.channelCount+X)}for(const[j,X]of he.entries())X.connect(pe,0,U+j),X.start(0);return pe.connect(V.destination),await Promise.all(q.map(j=>m(b,V,j))),f(V)})(),_,h,N,A,u)}const S=await T,B=n(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[P,W,k]=M;S!==null&&(B.buffer=S,B.start(0)),B.connect(P);for(let U=0,x=0;U<b.numberOfOutputs;U+=1){const O=W[U];for(let R=0;R<N[U];R+=1)P.connect(O,x+R,R);x+=N[U]}return k}if(L)for(const[S,B]of b.parameters.entries())await e(_,B,y.parameters.get(S));else for(const[S,B]of b.parameters.entries())await g(_,B,y.parameters.get(S));return await m(b,_,y),y};return{render(b,_){c(_,b);const y=v.get(_);return y!==void 0?Promise.resolve(y):E(b,_)}}},Do=(e,t)=>(n,r)=>{const o=t.get(n);if(o!==void 0)return o;const s=e.get(n);if(s!==void 0)return s;try{const a=r();return a instanceof Promise?(e.set(n,a),a.catch(()=>!1).then(c=>(e.delete(n),t.set(n,c),c))):(t.set(n,a),a)}catch{return t.set(n,!1),!1}},Vo=e=>(t,n,r)=>e(n,t,r),xo=e=>(t,n,r=0,o=0)=>{const s=t[r];if(s===void 0)throw e();return We(n)?s.connect(n,0,o):s.connect(n,0)},Fo=e=>t=>(e[0]=t,e[0]),jo=(e,t,n,r,o,s,a,c)=>(i,u)=>{const d=t.get(i);if(d===void 0)throw new Error("Missing the expected cycle count.");const l=s(i.context),p=c(l);if(d===u){if(t.delete(i),!p&&a(i)){const g=r(i),{outputs:m}=n(i);for(const f of m)if(Te(f)){const w=r(f[0]);e(g,w,f[1],f[2])}else{const w=o(f[0]);g.connect(w,f[1])}}}else t.set(i,d-u)},Go=e=>(t,n,r,o)=>e(t[o],s=>s[0]===n&&s[1]===r),qo=e=>(t,n)=>{e(t).delete(n)},$o=e=>"delayTime"in e,zo=(e,t,n)=>function r(o,s){const a=Ue(s)?s:n(e,s);if($o(a))return[];if(o[0]===a)return[o];if(o.includes(a))return[];const{outputs:c}=t(a);return Array.from(c).map(i=>r([...o,a],i[0])).reduce((i,u)=>i.concat(u),[])},Ie=(e,t,n)=>{const r=t[n];if(r===void 0)throw e();return r},Xo=e=>(t,n=void 0,r=void 0,o=0)=>n===void 0?t.forEach(s=>s.disconnect()):typeof n=="number"?Ie(e,t,n).disconnect():We(n)?r===void 0?t.forEach(s=>s.disconnect(n)):o===void 0?Ie(e,t,r).disconnect(n,0):Ie(e,t,r).disconnect(n,0,o):r===void 0?t.forEach(s=>s.disconnect(n)):Ie(e,t,r).disconnect(n,0),Yo=e=>t=>new Promise((n,r)=>{if(e===null){r(new SyntaxError);return}const o=e.document.head;if(o===null)r(new SyntaxError);else{const s=e.document.createElement("script"),a=new Blob([t],{type:"application/javascript"}),c=URL.createObjectURL(a),i=e.onerror,u=()=>{e.onerror=i,URL.revokeObjectURL(c)};e.onerror=(d,l,p,g,m)=>{if(l===c||l===e.location.href&&p===1&&g===1)return u(),r(m),!1;if(i!==null)return i(d,l,p,g,m)},s.onerror=()=>{u(),r(new SyntaxError)},s.onload=()=>{u(),n()},s.src=c,s.type="module",o.appendChild(s)}}),Ho=e=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,o){if(r!==null){let s=this._listeners.get(r);s===void 0&&(s=e(this,r),typeof r=="function"&&this._listeners.set(r,s)),this._nativeEventTarget.addEventListener(n,s,o)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,o){const s=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,s===void 0?null:s,o)}},Zo=e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get(){return Math.round(t*n)}},currentTime:{configurable:!0,get(){return t}}});try{return r()}finally{e!==null&&(delete e.currentFrame,delete e.currentTime)}},Ko=e=>async t=>{try{const n=await fetch(t);if(n.ok)return[await n.text(),n.url]}catch{}throw e()},Qo=(e,t)=>n=>t(e,n),Jo=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},es=e=>t=>{var n;return(n=e.get(t))!==null&&n!==void 0?n:0},ts=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},ns=e=>t=>e.get(t),Z=()=>new DOMException("","InvalidStateError"),rs=e=>t=>{const n=e.get(t);if(n===void 0)throw Z();return n},os=(e,t)=>n=>{let r=e.get(n);if(r!==void 0)return r;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r},ss=e=>t=>{const n=e.get(t);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},as=()=>new DOMException("","InvalidAccessError"),is=(e,t,n,r,o,s)=>a=>(c,i)=>{const u=e.get(c);if(u===void 0){if(!a&&s(c)){const d=r(c),{outputs:l}=n(c);for(const p of l)if(Te(p)){const g=r(p[0]);t(d,g,p[1],p[2])}else{const g=o(p[0]);d.disconnect(g,p[1])}}e.set(c,i)}else e.set(c,u+i)},cs=e=>t=>e!==null&&t instanceof e,us=e=>t=>e!==null&&typeof e.AudioNode=="function"&&t instanceof e.AudioNode,ls=e=>t=>e!==null&&typeof e.AudioParam=="function"&&t instanceof e.AudioParam,ds=e=>t=>e!==null&&t instanceof e,fs=e=>e!==null&&e.isSecureContext,hs=(e,t,n,r)=>class extends e{constructor(s,a){const c=n(s),i=t(c,a);if(r(c))throw new TypeError;super(s,!0,i,null),this._nativeMediaStreamAudioSourceNode=i}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},ps=(e,t,n,r,o)=>class extends r{constructor(a={}){if(o===null)throw new Error("Missing the native AudioContext constructor.");let c;try{c=new o(a)}catch(d){throw d.code===12&&d.message==="sampleRate is not in range"?t():d}if(c===null)throw n();if(!_o(a.latencyHint))throw new TypeError(`The provided value '${a.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(a.sampleRate!==void 0&&c.sampleRate!==a.sampleRate)throw t();super(c,2);const{latencyHint:i}=a,{sampleRate:u}=c;if(this._baseLatency=typeof c.baseLatency=="number"?c.baseLatency:i==="balanced"?512/u:i==="interactive"||i===void 0?256/u:i==="playback"?1024/u:Math.max(2,Math.min(128,Math.round(i*u/128)))*128/u,this._nativeAudioContext=c,o.name==="webkitAudioContext"?(this._nativeGainNode=c.createGain(),this._nativeOscillatorNode=c.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(c.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,c.state==="running"){this._state="suspended";const d=()=>{this._state==="suspended"&&(this._state=null),c.removeEventListener("statechange",d)};c.addEventListener("statechange",d)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),wo(this)}))}resume(){return this._state==="suspended"?new Promise((a,c)=>{const i=()=>{this._nativeAudioContext.removeEventListener("statechange",i),this._nativeAudioContext.state==="running"?a():this.resume().then(a,c)};this._nativeAudioContext.addEventListener("statechange",i)}):this._nativeAudioContext.resume().catch(a=>{throw a===void 0||a.code===15?e():a})}suspend(){return this._nativeAudioContext.suspend().catch(a=>{throw a===void 0?e():a})}},ms=(e,t,n,r,o,s)=>class extends n{constructor(c,i){super(c),this._nativeContext=c,dn.set(this,c),r(c)&&o.set(c,new Set),this._destination=new e(this,i),this._listener=t(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const i=typeof c=="function"?s(this,c):null;this._nativeContext.onstatechange=i;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===i?c:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Ht=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},gs=(e,t)=>(n,r,o)=>{const s=new Set;return n.connect=(a=>(c,i=0,u=0)=>{const d=s.size===0;if(t(c))return a.call(n,c,i,u),e(s,[c,i,u],l=>l[0]===c&&l[1]===i&&l[2]===u,!0),d&&r(),c;a.call(n,c,i),e(s,[c,i],l=>l[0]===c&&l[1]===i,!0),d&&r()})(n.connect),n.disconnect=(a=>(c,i,u)=>{const d=s.size>0;if(c===void 0)a.apply(n),s.clear();else if(typeof c=="number"){a.call(n,c);for(const p of s)p[1]===c&&s.delete(p)}else{t(c)?a.call(n,c,i,u):a.call(n,c,i);for(const p of s)p[0]===c&&(i===void 0||p[1]===i)&&(u===void 0||p[2]===u)&&s.delete(p)}const l=s.size===0;d&&l&&o()})(n.disconnect),n},se=(e,t,n)=>{const r=t[n];r!==void 0&&r!==e[n]&&(e[n]=r)},Me=(e,t)=>{se(e,t,"channelCount"),se(e,t,"channelCountMode"),se(e,t,"channelInterpretation")},ws=e=>e===null?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null,wt=(e,t,n)=>{const r=t[n];r!==void 0&&r!==e[n].value&&(e[n].value=r)},_s=e=>{e.start=(t=>{let n=!1;return(r=0,o=0,s)=>{if(n)throw Z();t.call(e,r,o,s),n=!0}})(e.start)},Cn=e=>{e.start=(t=>(n=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,o)})(e.start)},Tn=e=>{e.stop=(t=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})(e.stop)},vs=(e,t,n,r,o,s,a,c,i,u,d)=>(l,p)=>{const g=l.createBufferSource();return Me(g,p),wt(g,p,"playbackRate"),se(g,p,"buffer"),se(g,p,"loop"),se(g,p,"loopEnd"),se(g,p,"loopStart"),t(n,()=>n(l))||_s(g),t(r,()=>r(l))||i(g),t(o,()=>o(l))||u(g,l),t(s,()=>s(l))||Cn(g),t(a,()=>a(l))||d(g,l),t(c,()=>c(l))||Tn(g),e(l,g),g},ys=e=>e===null?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null,Es=(e,t)=>(n,r,o)=>{const s=n.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}o&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});const a=e(n,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return t(a,"channelCount",c=>()=>c.call(a),c=>i=>{c.call(a,i);try{s.channelCount=i}catch(u){if(i>s.maxChannelCount)throw u}}),t(a,"channelCountMode",c=>()=>c.call(a),c=>i=>{c.call(a,i),s.channelCountMode=i}),t(a,"channelInterpretation",c=>()=>c.call(a),c=>i=>{c.call(a,i),s.channelInterpretation=i}),Object.defineProperty(a,"maxChannelCount",{get:()=>s.maxChannelCount}),a.connect(s),a},bs=e=>e===null?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null,As=e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}},Cs=(e,t,n,r,o)=>(s,a,c,i,u,d)=>{if(c!==null)try{const l=new c(s,i,d),p=new Map;let g=null;if(Object.defineProperties(l,{channelCount:{get:()=>d.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>g,set:m=>{typeof g=="function"&&l.removeEventListener("processorerror",g),g=typeof m=="function"?m:null,typeof g=="function"&&l.addEventListener("processorerror",g)}}}),l.addEventListener=(m=>(...f)=>{if(f[0]==="processorerror"){const w=typeof f[1]=="function"?f[1]:typeof f[1]=="object"&&f[1]!==null&&typeof f[1].handleEvent=="function"?f[1].handleEvent:null;if(w!==null){const h=p.get(f[1]);h!==void 0?f[1]=h:(f[1]=A=>{A.type==="error"?(Object.defineProperties(A,{type:{value:"processorerror"}}),w(A)):w(new ErrorEvent(f[0],{...A}))},p.set(w,f[1]))}}return m.call(l,"error",f[1],f[2]),m.call(l,...f)})(l.addEventListener),l.removeEventListener=(m=>(...f)=>{if(f[0]==="processorerror"){const w=p.get(f[1]);w!==void 0&&(p.delete(f[1]),f[1]=w)}return m.call(l,"error",f[1],f[2]),m.call(l,f[0],f[1],f[2])})(l.removeEventListener),d.numberOfOutputs!==0){const m=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return l.connect(m).connect(s.destination),o(l,()=>m.disconnect(),()=>m.connect(s.destination))}return l}catch(l){throw l.code===11?r():l}if(u===void 0)throw r();return As(d),t(s,a,u,d)},Ts=(e,t)=>e===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Ms=e=>new Promise((t,n)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:s})=>{r.close(),o.close(),t(s)},r.onmessageerror=({data:s})=>{r.close(),o.close(),n(s)},o.postMessage(e)}),Ns=async(e,t)=>{const n=await Ms(t);return new e(n)},Os=(e,t,n,r)=>{let o=st.get(e);o===void 0&&(o=new WeakMap,st.set(e,o));const s=Ns(n,r);return o.set(t,s),s},ks=(e,t,n,r,o,s,a,c,i,u,d,l,p)=>(g,m,f,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw i();const h=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(h.some(C=>C<1))throw i();if(h.length!==w.numberOfOutputs)throw t();if(w.channelCountMode!=="explicit")throw i();const A=w.channelCount*w.numberOfInputs,v=h.reduce((C,I)=>C+I,0),T=f.parameterDescriptors===void 0?0:f.parameterDescriptors.length;if(A+T>6||v>6)throw i();const E=new MessageChannel,b=[],_=[];for(let C=0;C<w.numberOfInputs;C+=1)b.push(a(g,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),_.push(o(g,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const y=[];if(f.parameterDescriptors!==void 0)for(const{defaultValue:C,maxValue:I,minValue:$,name:F}of f.parameterDescriptors){const D=s(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[F]!==void 0?w.parameterData[F]:C===void 0?0:C});Object.defineProperties(D.offset,{defaultValue:{get:()=>C===void 0?0:C},maxValue:{get:()=>I===void 0?pt:I},minValue:{get:()=>$===void 0?Fe:$}}),y.push(D)}const M=r(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,A+T)}),L=Ts(m,g.sampleRate),N=c(g,L,A+T,Math.max(1,v)),S=o(g,{channelCount:Math.max(1,v),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,v)}),B=[];for(let C=0;C<w.numberOfOutputs;C+=1)B.push(r(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:h[C]}));for(let C=0;C<w.numberOfInputs;C+=1){b[C].connect(_[C]);for(let I=0;I<w.channelCount;I+=1)_[C].connect(M,I,C*w.channelCount+I)}const P=new bn(f.parameterDescriptors===void 0?[]:f.parameterDescriptors.map(({name:C},I)=>{const $=y[I];return $.connect(M,0,A+I),$.start(0),[C,$.offset]}));M.connect(N);let W=w.channelInterpretation,k=null;const U=w.numberOfOutputs===0?[N]:B,x={get bufferSize(){return L},get channelCount(){return w.channelCount},set channelCount(C){throw n()},get channelCountMode(){return w.channelCountMode},set channelCountMode(C){throw n()},get channelInterpretation(){return W},set channelInterpretation(C){for(const I of b)I.channelInterpretation=C;W=C},get context(){return N.context},get inputs(){return b},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return k},set onprocessorerror(C){typeof k=="function"&&x.removeEventListener("processorerror",k),k=typeof C=="function"?C:null,typeof k=="function"&&x.addEventListener("processorerror",k)},get parameters(){return P},get port(){return E.port2},addEventListener(...C){return N.addEventListener(C[0],C[1],C[2])},connect:e.bind(null,U),disconnect:u.bind(null,U),dispatchEvent(...C){return N.dispatchEvent(C[0])},removeEventListener(...C){return N.removeEventListener(C[0],C[1],C[2])}},O=new Map;E.port1.addEventListener=(C=>(...I)=>{if(I[0]==="message"){const $=typeof I[1]=="function"?I[1]:typeof I[1]=="object"&&I[1]!==null&&typeof I[1].handleEvent=="function"?I[1].handleEvent:null;if($!==null){const F=O.get(I[1]);F!==void 0?I[1]=F:(I[1]=D=>{d(g.currentTime,g.sampleRate,()=>$(D))},O.set($,I[1]))}}return C.call(E.port1,I[0],I[1],I[2])})(E.port1.addEventListener),E.port1.removeEventListener=(C=>(...I)=>{if(I[0]==="message"){const $=O.get(I[1]);$!==void 0&&(O.delete(I[1]),I[1]=$)}return C.call(E.port1,I[0],I[1],I[2])})(E.port1.removeEventListener);let R=null;Object.defineProperty(E.port1,"onmessage",{get:()=>R,set:C=>{typeof R=="function"&&E.port1.removeEventListener("message",R),R=typeof C=="function"?C:null,typeof R=="function"&&(E.port1.addEventListener("message",R),E.port1.start())}}),f.prototype.port=E.port1;let V=null;Os(g,x,f,w).then(C=>V=C);const fe=Ve(w.numberOfInputs,w.channelCount),he=Ve(w.numberOfOutputs,h),pe=f.parameterDescriptors===void 0?[]:f.parameterDescriptors.reduce((C,{name:I})=>({...C,[I]:new Float32Array(128)}),{});let j=!0;const X=()=>{w.numberOfOutputs>0&&N.disconnect(S);for(let C=0,I=0;C<w.numberOfOutputs;C+=1){const $=B[C];for(let F=0;F<h[C];F+=1)S.disconnect($,I+F,F);I+=h[C]}},Ne=new Map;N.onaudioprocess=({inputBuffer:C,outputBuffer:I})=>{if(V!==null){const $=l(x);for(let F=0;F<L;F+=128){for(let D=0;D<w.numberOfInputs;D+=1)for(let G=0;G<w.channelCount;G+=1)De(C,fe[D],G,G,F);f.parameterDescriptors!==void 0&&f.parameterDescriptors.forEach(({name:D},G)=>{De(C,pe,D,A+G,F)});for(let D=0;D<w.numberOfInputs;D+=1)for(let G=0;G<h[D];G+=1)he[D][G].byteLength===0&&(he[D][G]=new Float32Array(128));try{const D=fe.map((Y,te)=>{if($[te].size>0)return Ne.set(te,L/128),Y;const He=Ne.get(te);return He===void 0?[]:(Y.every(Qn=>Qn.every(Jn=>Jn===0))&&(He===1?Ne.delete(te):Ne.set(te,He-1)),Y)});j=d(g.currentTime+F/g.sampleRate,g.sampleRate,()=>V.process(D,he,pe));for(let Y=0,te=0;Y<w.numberOfOutputs;Y+=1){for(let ve=0;ve<h[Y];ve+=1)An(I,he[Y],ve,te+ve,F);te+=h[Y]}}catch(D){j=!1,x.dispatchEvent(new ErrorEvent("processorerror",{colno:D.colno,filename:D.filename,lineno:D.lineno,message:D.message}))}if(!j){for(let D=0;D<w.numberOfInputs;D+=1){b[D].disconnect(_[D]);for(let G=0;G<w.channelCount;G+=1)_[F].disconnect(M,G,D*w.channelCount+G)}if(f.parameterDescriptors!==void 0){const D=f.parameterDescriptors.length;for(let G=0;G<D;G+=1){const Y=y[G];Y.disconnect(M,0,A+G),Y.stop()}}M.disconnect(N),N.onaudioprocess=null,Xe?X():kt();break}}}};let Xe=!1;const Ye=a(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ot=()=>N.connect(Ye).connect(g.destination),kt=()=>{N.disconnect(Ye),Ye.disconnect()},Zn=()=>{if(j){kt(),w.numberOfOutputs>0&&N.connect(S);for(let C=0,I=0;C<w.numberOfOutputs;C+=1){const $=B[C];for(let F=0;F<h[C];F+=1)S.connect($,I+F,F);I+=h[C]}}Xe=!0},Kn=()=>{j&&(Ot(),X()),Xe=!1};return Ot(),p(x,Zn,Kn)},Is=(e,t)=>(n,r)=>{const o=n.createChannelMerger(r.numberOfInputs);return e!==null&&e.name==="webkitAudioContext"&&t(n,o),Me(o,r),o},Ss=e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:n=>{if(n!==t)throw Z()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Z()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Z()}})},Mn=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Me(n,t),Ss(n),n},Rs=(e,t,n,r,o)=>(s,a)=>{if(s.createConstantSource===void 0)return n(s,a);const c=s.createConstantSource();return Me(c,a),wt(c,a,"offset"),t(r,()=>r(s))||Cn(c),t(o,()=>o(s))||Tn(c),e(s,c),c},Nn=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),Ls=(e,t,n,r)=>(o,{offset:s,...a})=>{const c=o.createBuffer(1,2,44100),i=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(o,{...a,gain:s}),d=c.getChannelData(0);d[0]=1,d[1]=1,i.buffer=c,i.loop=!0;const l={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(m){u.channelCount=m},get channelCountMode(){return u.channelCountMode},set channelCountMode(m){u.channelCountMode=m},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(m){u.channelInterpretation=m},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return i.onended},set onended(m){i.onended=m},addEventListener(...m){return i.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return i.dispatchEvent(m[0])},removeEventListener(...m){return i.removeEventListener(m[0],m[1],m[2])},start(m=0){i.start.call(i,m)},stop(m=0){i.stop.call(i,m)}},p=()=>i.connect(u),g=()=>i.disconnect(u);return e(o,i),r(Nn(l,u),p,g)},oe=(e,t)=>{const n=e.createGain();return Me(n,t),wt(n,t,"gain"),n},Ps=(e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort((s,a)=>s.id<a.id?-1:s.id>a.id?1:0);const r=n.slice(0,1),o=e.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:t}),o},Bs=e=>e===null?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null,_t=(e,t,n,r)=>e.createScriptProcessor(t,n,r),de=()=>new DOMException("","NotSupportedError"),Us=(e,t)=>(n,r,o)=>(e(r).replay(o),t(r,n,o)),Ws=(e,t,n)=>async(r,o,s)=>{const a=e(r);await Promise.all(a.activeInputs.map((c,i)=>Array.from(c).map(async([u,d])=>{const p=await t(u).render(u,o),g=r.context.destination;!n(u)&&(r!==g||!n(r))&&p.connect(s,d,i)})).reduce((c,i)=>[...c,...i],[]))},Ds=(e,t,n)=>async(r,o,s)=>{const a=t(r);await Promise.all(Array.from(a.activeInputs).map(async([c,i])=>{const d=await e(c).render(c,o);n(c)||d.connect(s,i)}))},Vs=(e,t,n,r)=>o=>e(Ht,()=>Ht(o))?Promise.resolve(e(r,r)).then(s=>{if(!s){const a=n(o,512,0,1);o.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>o.currentTime,a.connect(o.destination)}return o.startRendering()}):new Promise(s=>{const a=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=c=>{a.disconnect(),s(c.renderedBuffer)},a.connect(o.destination),o.startRendering()}),xs=e=>(t,n)=>{e.set(t,n)},Fs=e=>()=>{if(e===null)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0},js=(e,t)=>async()=>{if(e===null)return!0;if(t===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),o=URL.createObjectURL(n);let s=!1,a=!1;try{await r.audioWorklet.addModule(o);const c=new e(r,"a",{numberOfOutputs:0}),i=r.createOscillator();c.port.onmessage=()=>s=!0,c.onprocessorerror=()=>a=!0,i.connect(c),i.start(0),await r.startRendering(),await new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(o)}return s&&!a},Gs=(e,t)=>()=>{if(t===null)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{n.oncomplete=()=>{r.disconnect(),o(n.currentTime!==0)},n.startRendering()})},qs=()=>new DOMException("","UnknownError"),$s=()=>typeof window>"u"?null:window,zs=(e,t)=>n=>{n.copyFromChannel=(r,o,s=0)=>{const a=e(s),c=e(o);if(c>=n.numberOfChannels)throw t();const i=n.length,u=n.getChannelData(c),d=r.length;for(let l=a<0?-a:0;l+a<i&&l<d;l+=1)r[l]=u[l+a]},n.copyToChannel=(r,o,s=0)=>{const a=e(s),c=e(o);if(c>=n.numberOfChannels)throw t();const i=n.length,u=n.getChannelData(c),d=r.length;for(let l=a<0?-a:0;l+a<i&&l<d;l+=1)u[l+a]=r[l]}},Xs=e=>t=>{t.copyFromChannel=(n=>(r,o,s=0)=>{const a=e(s),c=e(o);if(a<t.length)return n.call(t,r,c,a)})(t.copyFromChannel),t.copyToChannel=(n=>(r,o,s=0)=>{const a=e(s),c=e(o);if(a<t.length)return n.call(t,r,c,a)})(t.copyToChannel)},Ys=e=>(t,n)=>{const r=n.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=r),e(t,"buffer",o=>()=>{const s=o.call(t);return s===r?null:s},o=>s=>o.call(t,s===null?r:s))},Hs=(e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const o=n.createBufferSource();t(r,()=>{const c=r.numberOfInputs;for(let i=0;i<c;i+=1)o.connect(r,0,i)},()=>o.disconnect(r))},Zs=(e,t,n)=>e.copyFromChannel===void 0?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),vt=(e,t,n,r)=>{let o=e;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:s,set:a}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(e,t,{get:n(s),set:r(a)})},Ks=e=>({...e,outputChannelCount:e.outputChannelCount!==void 0?e.outputChannelCount:e.numberOfInputs===1&&e.numberOfOutputs===1?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),On=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(r.code!==9)throw r;On(e,t,n+1e-7)}},Qs=e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},Js=e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},ea=e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},kn=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},ta=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},In=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},na=e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},ra=e=>{e.start=(t=>(n=0,r=0,o)=>{const s=e.buffer,a=s===null?r:Math.min(s.duration,r);s!==null&&a>s.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,a,o)})(e.start)},oa=(e,t)=>{const n=t.createGain();e.connect(n);const r=(o=>()=>{o.call(e,n),e.removeEventListener("ended",r)})(e.disconnect);e.addEventListener("ended",r),Nn(e,n),e.stop=(o=>{let s=!1;return(a=0)=>{if(s)try{o.call(e,a)}catch{n.gain.setValueAtTime(0,a)}else o.call(e,a),s=!0}})(e.stop)},je=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},sa=Hr(le),aa=to(le),ia=Go(xe),ca=new WeakMap,ua=es(ca),we=Do(new Map,new WeakMap),Q=$s(),Sn=Jo(z),yt=Ws(z,Sn,ie),ce=rs(dn),_e=Bs(Q),ee=ds(_e),Rn=new WeakMap,Ln=Ho(je),Ge=ys(Q),la=cs(Ge),Pn=us(Q),da=ls(Q),be=bs(Q),qe=Io(Zr(an),eo(sa,aa,ct,ia,ut,z,ua,Ae,H,le,ae,ie,Se),we,is(rt,ut,z,H,Ee,ae),ue,as,de,jo(ct,rt,z,H,Ee,ce,ae,ee),zo(Rn,z,K),Ln,ce,la,Pn,da,ee,be),fa=new WeakSet,Zt=ws(Q),Bn=Fo(new Uint32Array(1)),ha=zs(Bn,ue),pa=Xs(Bn),ma=ao(fa,we,de,Zt,_e,Fs(Zt),ha,pa),Et=no(oe),Un=Ds(Sn,Ce,ie),Wn=Vo(Un),$e=vs(Et,we,Qs,Js,ea,kn,ta,In,ra,Ys(vt),oa),Dn=Us(ts(Ce),Un),ga=uo(Wn,$e,H,Dn,yt),bt=So(Kr(un),Rn,ln,Ro,Gr,qr,$r,zr,Xr,et,on,Ge,On),wa=co(qe,ga,bt,Z,$e,ce,ee,je),_a=vo(qe,yo,ue,Z,Es(oe,vt),ce,ee,yt),ze=gs(le,Pn),va=Hs(Z,ze),At=Is(Ge,va),ya=Ls(Et,$e,oe,ze),Ct=Rs(Et,we,ya,kn,In),Ea=Vs(we,oe,_t,Gs(oe,_e)),ba=Eo(bt,At,Ct,_t,de,Zs,ee,vt),Vn=new WeakMap,Aa=ms(_a,ba,Ln,ee,Vn,je),xn=fs(Q),Tt=Zo(Q),Fn=new WeakMap,Ca=os(Fn,_e),Kt=xn?Jr(we,de,Yo(Q),Tt,Ko(Yr),ce,Ca,ee,be,new WeakMap,new WeakMap,js(be,_e),Q):void 0,Ta=hs(qe,Ps,ce,ee),jn=ss(Vn),Ma=ro(jn),Gn=xo(ue),Na=qo(jn),qn=Xo(ue),$n=new WeakMap,Oa=Qo($n,K),ka=ks(Gn,ue,Z,At,Mn,Ct,oe,_t,de,qn,Tt,Oa,ze),Ia=Cs(Z,ka,oe,de,ze),Sa=Wo(Wn,Gn,$e,At,Mn,Ct,oe,Na,qn,Tt,H,be,_e,Dn,yt,Ea),Ra=ns(Fn),La=xs($n),Qt=xn?Po(Ma,qe,bt,Sa,Ia,z,Ra,ce,ee,be,Ks,La,na,je):void 0,Pa=ps(Z,de,qs,Aa,Ge),zn="Missing AudioWorklet support. Maybe this is not running in a secure context.",Ba=async(e,t,n,r,o)=>{const{encoderInstanceId:s,port:a}=await nn(o,t.sampleRate);if(Qt===void 0)throw new Error(zn);const c=e===null?null:new wa(t,{buffer:e}),i=new Ta(t,{mediaStream:r}),u=Vr(Qt,t,{channelCount:n});return{audioBufferSourceNode:c,encoderInstanceId:s,mediaStreamAudioSourceNode:i,port:a,recorderAudioWorkletNode:u}},Ua=(e,t,n,r)=>(o,s,a)=>{var c;const i=(c=s.getAudioTracks()[0])===null||c===void 0?void 0:c.getSettings().sampleRate,u=new Pa({latencyHint:"playback",sampleRate:i}),d=MediaRecorder.isTypeSupported("audio/mp4")?new ma({length:2688,sampleRate:u.sampleRate}):null,l=[],p=Dr(_=>{if(Kt===void 0)throw new Error(zn);return Kt(u,_)});let g=null,m=null,f=null,w=null,h=!0;const A=_=>{o.dispatchEvent(e("dataavailable",{data:new Blob(_,{type:a})}))},v=async(_,y)=>{const M=await Re(_,y);f===null?l.push(...M):(A(M),w=v(_,y))},T=()=>(h=!0,u.resume()),E=()=>{f!==null&&(g!==null&&(s.removeEventListener("addtrack",g),s.removeEventListener("removetrack",g)),m!==null&&clearTimeout(m),f.then(async({encoderInstanceId:_,mediaStreamAudioSourceNode:y,recorderAudioWorkletNode:M})=>{w!==null&&(w.catch(()=>{}),w=null),await M.stop(),y.disconnect(M);const L=await Re(_,null);f===null&&await b(),A([...l,...L]),l.length=0,o.dispatchEvent(new Event("stop"))}),f=null)},b=()=>(h=!1,u.suspend());return b(),{get mimeType(){return a},get state(){return f===null?"inactive":h?"recording":"paused"},pause(){if(f===null)throw n();h&&(b(),o.dispatchEvent(new Event("pause")))},resume(){if(f===null)throw n();h||(T(),o.dispatchEvent(new Event("resume")))},start(_){var y;if(f!==null)throw n();if(s.getVideoTracks().length>0)throw r();o.dispatchEvent(new Event("start"));const M=s.getAudioTracks(),L=M.length===0?2:(y=M[0].getSettings().channelCount)!==null&&y!==void 0?y:2;f=Promise.all([T(),p.then(()=>Ba(d,u,L,s,a))]).then(async([,{audioBufferSourceNode:S,encoderInstanceId:B,mediaStreamAudioSourceNode:P,port:W,recorderAudioWorkletNode:k}])=>(P.connect(k),S!==null&&(await new Promise(U=>{S.onended=U,S.connect(k),S.start()}),S.disconnect(k)),await k.record(W),_!==void 0&&(w=v(B,_)),{encoderInstanceId:B,mediaStreamAudioSourceNode:P,recorderAudioWorkletNode:k}));const N=s.getTracks();g=()=>{E(),o.dispatchEvent(new ErrorEvent("error",{error:t()}))},s.addEventListener("addtrack",g),s.addEventListener("removetrack",g),m=setInterval(()=>{const S=s.getTracks();(S.length!==N.length||S.some((B,P)=>B!==N[P]))&&g!==null&&g()},1e3)},stop:E}};class Qe{constructor(t,n=0,r){if(n<0||r!==void 0&&r<0)throw new RangeError;const o=t.reduce((d,l)=>d+l.byteLength,0);if(n>o||r!==void 0&&n+r>o)throw new RangeError;const s=[],a=r===void 0?o-n:r,c=[];let i=0,u=n;for(const d of t)if(c.length===0)if(d.byteLength>u){i=d.byteLength-u;const l=i>a?a:i;s.push(new DataView(d,u,l)),c.push(d)}else u-=d.byteLength;else if(i<a){i+=d.byteLength;const l=i>a?d.byteLength-i+a:d.byteLength;s.push(new DataView(d,0,l)),c.push(d)}this._buffers=c,this._byteLength=a,this._byteOffset=u,this._dataViews=s,this._internalBuffer=new DataView(new ArrayBuffer(8))}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get byteOffset(){return this._byteOffset}getFloat32(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.setUint8(2,this.getUint8(t+2)),this._internalBuffer.setUint8(3,this.getUint8(t+3)),this._internalBuffer.getFloat32(0,n)}getFloat64(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.setUint8(2,this.getUint8(t+2)),this._internalBuffer.setUint8(3,this.getUint8(t+3)),this._internalBuffer.setUint8(4,this.getUint8(t+4)),this._internalBuffer.setUint8(5,this.getUint8(t+5)),this._internalBuffer.setUint8(6,this.getUint8(t+6)),this._internalBuffer.setUint8(7,this.getUint8(t+7)),this._internalBuffer.getFloat64(0,n)}getInt16(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.getInt16(0,n)}getInt32(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.setUint8(2,this.getUint8(t+2)),this._internalBuffer.setUint8(3,this.getUint8(t+3)),this._internalBuffer.getInt32(0,n)}getInt8(t){const[n,r]=this._findDataViewWithOffset(t);return n.getInt8(t-r)}getUint16(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.getUint16(0,n)}getUint32(t,n){return this._internalBuffer.setUint8(0,this.getUint8(t+0)),this._internalBuffer.setUint8(1,this.getUint8(t+1)),this._internalBuffer.setUint8(2,this.getUint8(t+2)),this._internalBuffer.setUint8(3,this.getUint8(t+3)),this._internalBuffer.getUint32(0,n)}getUint8(t){const[n,r]=this._findDataViewWithOffset(t);return n.getUint8(t-r)}setFloat32(t,n,r){this._internalBuffer.setFloat32(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1)),this.setUint8(t+2,this._internalBuffer.getUint8(2)),this.setUint8(t+3,this._internalBuffer.getUint8(3))}setFloat64(t,n,r){this._internalBuffer.setFloat64(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1)),this.setUint8(t+2,this._internalBuffer.getUint8(2)),this.setUint8(t+3,this._internalBuffer.getUint8(3)),this.setUint8(t+4,this._internalBuffer.getUint8(4)),this.setUint8(t+5,this._internalBuffer.getUint8(5)),this.setUint8(t+6,this._internalBuffer.getUint8(6)),this.setUint8(t+7,this._internalBuffer.getUint8(7))}setInt16(t,n,r){this._internalBuffer.setInt16(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1))}setInt32(t,n,r){this._internalBuffer.setInt32(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1)),this.setUint8(t+2,this._internalBuffer.getUint8(2)),this.setUint8(t+3,this._internalBuffer.getUint8(3))}setInt8(t,n){const[r,o]=this._findDataViewWithOffset(t);r.setInt8(t-o,n)}setUint16(t,n,r){this._internalBuffer.setUint16(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1))}setUint32(t,n,r){this._internalBuffer.setUint32(0,n,r),this.setUint8(t,this._internalBuffer.getUint8(0)),this.setUint8(t+1,this._internalBuffer.getUint8(1)),this.setUint8(t+2,this._internalBuffer.getUint8(2)),this.setUint8(t+3,this._internalBuffer.getUint8(3))}setUint8(t,n){const[r,o]=this._findDataViewWithOffset(t);r.setUint8(t-o,n)}_findDataViewWithOffset(t){let n=0;for(const r of this._dataViews){const o=n+r.byteLength;if(t>=n&&t<o)return[r,n];n=o}throw new RangeError}}const Wa=(e,t,n)=>(r,o,s,a)=>{const c=[],i=new o(s,{mimeType:"audio/webm; codecs=pcm"});let u=null,d=()=>{};const l=m=>{r.dispatchEvent(e("dataavailable",{data:new Blob(m,{type:a})}))},p=async(m,f)=>{const w=await Re(m,f);i.state==="inactive"?c.push(...w):(l(w),u=p(m,f))},g=()=>{i.state!=="inactive"&&(u!==null&&(u.catch(()=>{}),u=null),d(),d=()=>{},i.stop())};return i.addEventListener("error",m=>{g(),r.dispatchEvent(new ErrorEvent("error",{error:m.error}))}),i.addEventListener("pause",()=>r.dispatchEvent(new Event("pause"))),i.addEventListener("resume",()=>r.dispatchEvent(new Event("resume"))),i.addEventListener("start",()=>r.dispatchEvent(new Event("start"))),{get mimeType(){return a},get state(){return i.state},pause(){return i.pause()},resume(){return i.resume()},start(m){const[f]=s.getAudioTracks();if(f!==void 0&&i.state==="inactive"){const{channelCount:w,sampleRate:h}=f.getSettings();if(w===void 0)throw new Error("The channelCount is not defined.");if(h===void 0)throw new Error("The sampleRate is not defined.");let A=!1,v=!1,T=0,E=nn(a,h);d=()=>{v=!0};const b=rn(i,"dataavailable")(({data:_})=>{T+=1;const y=_.arrayBuffer();E=E.then(async({dataView:M=null,elementType:L=null,encoderInstanceId:N,port:S})=>{const B=await y;T-=1;const P=M===null?new Qe([B]):new Qe([...M.buffers,B],M.byteOffset);if(!A&&i.state==="recording"&&!v){const O=n(P,0);if(O===null)return{dataView:P,elementType:L,encoderInstanceId:N,port:S};const{value:R}=O;if(R!==172351395)return{dataView:M,elementType:L,encoderInstanceId:N,port:S};A=!0}const{currentElementType:W,offset:k,contents:U}=t(P,L,w),x=k<P.byteLength?new Qe(P.buffers,P.byteOffset+k):null;return U.forEach(O=>S.postMessage(O,O.map(({buffer:R})=>R))),T===0&&(i.state==="inactive"||v)&&(Re(N,null).then(O=>{l([...c,...O]),c.length=0,r.dispatchEvent(new Event("stop"))}),S.postMessage([]),S.close(),b()),{dataView:x,elementType:W,encoderInstanceId:N,port:S}})});m!==void 0&&E.then(({encoderInstanceId:_})=>{v||(u=p(_,m))})}i.start(100)},stop:g}},Da=()=>typeof window>"u"?null:window,Xn=(e,t)=>{if(t>=e.byteLength)return null;const n=e.getUint8(t);if(n>127)return 1;if(n>63)return 2;if(n>31)return 3;if(n>15)return 4;if(n>7)return 5;if(n>3)return 6;if(n>1)return 7;if(n>0)return 8;const r=Xn(e,t+1);return r===null?null:r+8},Va=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},Yn=[],Mt=Da(),xa=Er(Mt),Hn=pr(xa),Fa=Ua(Hn,_r,vr,Je),Nt=Mr(Xn),ja=Cr(Nt),Ga=Tr(Nt),qa=mr(ja,Ga),$a=Wa(Hn,qa,Nt),za=wr(Mt),Xa=br(Mt),ai=yr(Ar(Je),Je,Fa,$a,Yn,gr(za,Va),Xa),Ya=new WeakMap,ii=async e=>{const t=await hr(e);Yn.push(t),Ya.set(e,t)};export{cr as c,ai as m,ii as r};
